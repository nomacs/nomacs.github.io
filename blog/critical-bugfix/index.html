<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" as="font" href="https://nomacs.org/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="https://nomacs.org/fonts/vendor/jost/jost-v4-latin-700.woff2"  type="font/woff2" crossorigin>


<link rel="stylesheet" href="https://nomacs.org/main.css">



  
  
  
  
  
    
  

  
  
    
    
  
  
  
    
  
  
  
  
    
  
  
  


  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">


	


	

<title>Critical Bugfix | nomacs</title>
<meta name="description" content="nomacs is a free, open source image viewer, which supports multiple platforms">
<link rel="canonical" href="https://nomacs.org/blog/critical-bugfix/">


  <meta name="twitter:card" content="summary_large_image">
  
    <meta name="twitter:image" content="https://nomacs.org/nomacs.svg">
  
  <meta name="twitter:title" content="Critical Bugfix">
  <meta name="twitter:description" content="nomacs is a free, open source image viewer, which supports multiple platforms">
  <meta name="twitter:site" content="@nomacs">
  <meta name="twitter:creator" content="@nomacs">
  
  <meta property="og:title" content="Critical Bugfix">
  <meta property="og:description" content="nomacs is a free, open source image viewer, which supports multiple platforms">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://nomacs.org/blog/critical-bugfix/">

  
    <meta property="og:image" content="https://nomacs.org/nomacs.svg">
  

  <meta property="og:updated_time" content="2014-01-15T19:49:49+01:00">
  <meta property="og:site_name" content="Critical Bugfix">

  

  

  
  <meta property="article:publisher" content="https://www.facebook.com/nomacs">
  <meta property="article:author" content="https://www.facebook.com/nomacs">
  <meta property="og:locale" content="en_US">





  
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/blog/critical-bugfix/"
      },
      "headline": "Critical Bugfix",
      "image": ,
      "datePublished": "2014-01-15T19:49:49+01:00",
      "dateModified": "2014-01-15T19:49:49+01:00",
      "author": {
        "@type": "Organization",
        "name": "Critical Bugfix"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Critical Bugfix",
        
        "logo": {
          "@type": "ImageObject",
          "url": "/nomacs.svg"
        }
        
      },
      "description": "nomacs is a free, open source image viewer, which supports multiple platforms"
    }
    </script>
  





<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://nomacs.org/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Blog",
            "item": "https://nomacs.org/blog/"
          },
        
      
        
        
        
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  3 ,
            "name": "Critical Bugfix",
            "item": "https://nomacs.org/blog/critical-bugfix/"
          },
        
      
    
  }
</script>







  <meta name="theme-color" content="#fff">
  <link rel="apple-touch-icon" sizes="180x180" href="https://nomacs.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://nomacs.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://nomacs.org/favicon-16x16.png">
  
    <link rel="manifest" href="https://nomacs.org/site.webmanifest" crossorigin>
  


  

</head>

  

<body class="blog single">
  
  
<div class="header-bar fixed-top"></div>
<header class="navbar fixed-top navbar-expand-md navbar-light">
	<div class="container">
		<input class="menu-btn order-0" type="checkbox" id="menu-btn">
		<label class="menu-icon d-md-none" for="menu-btn"><span class="navicon"></span></label>
		<a class="navbar-brand order-1 order-md-0 me-auto" href="https://nomacs.org">nomacs</a>
		<button id="mode" class="btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
			<span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
			<span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
		</button>
		<ul class="navbar-nav fork-me order-3 order-md-5">
			
				
					<li class="nav-item">
						<a class="nav-link" href="https://matrix.to/#/#nomacs:matrix.org"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-circle"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg><span class="ms-2 visually-hidden">Matrix</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://github.com/nomacs/nomacs"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a>
					</li>
				
			
		</ul>
		<div class="collapse navbar-collapse order-4 order-md-1">
			<ul class="navbar-nav main-nav me-auto order-5 order-md-2">
				
					
				
				
				
					
						<li class="nav-item">
							<a class="nav-link" href="https://nomacs.org/docs/getting-started/introduction/">Docs</a>
						</li>
					
						<li class="nav-item blog active">
							<a class="nav-link" href="https://nomacs.org/blog/">Blog</a>
						</li>
					
				
			</ul>
			<div class="break order-6 d-md-none"></div>
			
				<form class="navbar-form flex-grow-1 order-7 order-md-3">
					<input id="userinput" class="form-control is-search" type="search" placeholder="Search docs..."
						aria-label="Search docs..." autocomplete="off">
					<div id="suggestions" class="shadow bg-white rounded"></div>
				</form>
			
		</div>
	</div>
</header>



  
<div class="wrap container" role="document">
  <div class="content">
    <div class="row justify-content-center">
      <div class="col-md-12 col-lg-10 col-xxl-8">
        <article>
          <div class="blog-header">
            <h1>Critical Bugfix</h1>
            
<p><small>Posted January 15, 2014 by <a class="stretched-link position-relative" href="https://nomacs.org/authors/markus-diem/">Markus Diem</a>&nbsp;&hyphen;&nbsp;<strong>3&nbsp;min read</strong></small><p>

          </div>
          
          <p>we have found a critical bug which – in some cases – prevents nomacs from starting correctly.
If you experience this issue, we would recommend to update nomacs to version 1.6.3.
 The issue applies only to the Windows versions.
Users of other OS can safely enjoy version 1.6.2.
Sorry for any inconveniences caused.
For the Matlab users who do not enjoy the default image display behavior of Matlab:
this script allows you to directly display images in nomacs.</p>
<pre data-lang="matlab" style="background-color:#2b303b;color:#c0c5ce;" class="language-matlab "><code class="language-matlab" data-lang="matlab"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">nomacs</span><span>(</span><span style="color:#bf616a;">img</span><span>, </span><span style="color:#bf616a;">varargin</span><span>)
</span><span style="color:#65737e;">% nomacs(img, varargin)
</span><span style="color:#65737e;">% 
</span><span style="color:#65737e;">% nomacs displays the image img in nomacs
</span><span style="color:#65737e;">%
</span><span style="color:#65737e;">% INPUT:
</span><span style="color:#65737e;">%   img         the image to display
</span><span style="color:#65737e;">% 
</span><span style="color:#65737e;">%   normalize   displays the image in the range between [val1 val2]. If the
</span><span style="color:#65737e;">%               parameter is set to [] the image is normalized between
</span><span style="color:#65737e;">%               min(img(:)) and max(img(:)). Note: It is possible to pass
</span><span style="color:#65737e;">%               the following parameter struct as a second parameter, if
</span><span style="color:#65737e;">%               normalization should not be performed.
</span><span style="color:#65737e;">%   
</span><span style="color:#65737e;">%   tempFolder  the folder where the image is saved temporary (it is
</span><span style="color:#65737e;">%               deleted afterwards
</span><span style="color:#65737e;">%
</span><span style="color:#65737e;">%   exePath     specify the exePath if it is not in Program Files (x86)
</span><span>
</span><span style="color:#b48ead;">if </span><span>isempty(img)
</span><span>    </span><span style="color:#b48ead;">return</span><span>;
</span><span style="color:#b48ead;">elseif size</span><span>(img,</span><span style="color:#d08770;">4</span><span>) &gt; </span><span style="color:#d08770;">4
</span><span>    </span><span style="color:#b48ead;">warning</span><span>(&#39;</span><span style="color:#a3be8c;">NOMACS:falseImg</span><span>&#39;, [&#39;</span><span style="color:#a3be8c;">The number of channels must not be </span><span>&#39;...
</span><span>        &#39;</span><span style="color:#a3be8c;">greater than four.</span><span>&#39;]);
</span><span>    </span><span style="color:#b48ead;">return</span><span>;
</span><span style="color:#b48ead;">end
</span><span>
</span><span>p = parse_inputs(</span><span style="color:#bf616a;">varargin</span><span>{:});
</span><span>
</span><span style="color:#65737e;">% check if nomacs is up &amp; running
</span><span style="color:#b48ead;">if</span><span> ~</span><span style="color:#b48ead;">exist</span><span>(</span><span style="color:#b48ead;">strrep</span><span>(p.exePath, &#39;</span><span style="color:#a3be8c;">&quot;</span><span>&#39;, &#39;&#39;), &#39;</span><span style="color:#a3be8c;">file</span><span>&#39;)
</span><span>    </span><span style="color:#b48ead;">display</span><span>( p.exePath);
</span><span>    </span><span style="color:#b48ead;">error</span><span>(&#39;</span><span style="color:#a3be8c;">NOMACS:notFound</span><span>&#39;, [&#39;</span><span style="color:#a3be8c;">Sorry, I could not locate nomacs.exe </span><span style="color:#96b5b4;">\n</span><span>&#39;...
</span><span>        &#39;</span><span style="color:#a3be8c;">Please specify the correct exePath.</span><span>&#39;]);
</span><span style="color:#b48ead;">end
</span><span>
</span><span style="color:#b48ead;">if </span><span>isfield(p, &#39;</span><span style="color:#a3be8c;">normalize</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">if </span><span>isempty(p.</span><span style="color:#96b5b4;">normalize</span><span>)
</span><span>        
</span><span>        img = </span><span style="color:#96b5b4;">im2double</span><span>(img);
</span><span>        img = img-</span><span style="color:#b48ead;">min</span><span>(img(:));
</span><span>        img = img./</span><span style="color:#b48ead;">max</span><span>(img(:));
</span><span>
</span><span>    </span><span style="color:#b48ead;">elseif length</span><span>(p.</span><span style="color:#96b5b4;">normalize</span><span>) == </span><span style="color:#d08770;">2
</span><span>        n = p.normalize;
</span><span>        img = </span><span style="color:#b48ead;">double</span><span>(img);
</span><span>        img = img-n(</span><span style="color:#d08770;">1</span><span>);
</span><span>        img = img./(n(</span><span style="color:#d08770;">2</span><span>) - n(</span><span style="color:#d08770;">1</span><span>));        
</span><span>    </span><span style="color:#b48ead;">end
</span><span style="color:#b48ead;">end
</span><span>
</span><span style="color:#b48ead;">imwrite</span><span>(img, p.tempFolder);
</span><span>
</span><span style="color:#b48ead;">if</span><span> ~isunix
</span><span>    </span><span style="color:#b48ead;">system</span><span>([p.exePath &#39; &#39; p.tempFolder &#39;</span><span style="color:#a3be8c;"> &amp;</span><span>&#39;]);
</span><span style="color:#b48ead;">else
</span><span>    </span><span style="color:#b48ead;">unix</span><span>([p.exePath &#39; &#39; p.tempFolder &#39;</span><span style="color:#a3be8c;"> &amp;</span><span>&#39;]);
</span><span style="color:#b48ead;">end
</span><span>
</span><span style="color:#96b5b4;">delete</span><span>(p.tempFolder);
</span><span>
</span><span style="color:#65737e;">%-------------------------------------------------------------------------
</span><span style="color:#65737e;">%   Subfunction: Parse Inputs
</span><span style="color:#65737e;">%-------------------------------------------------------------------------
</span><span style="color:#b48ead;">function </span><span style="color:#bf616a;">params </span><span>= </span><span style="color:#8fa1b3;">parse_inputs</span><span>(</span><span style="color:#bf616a;">varargin</span><span>)
</span><span>
</span><span style="color:#65737e;">% called with normaliztion only
</span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">nargin</span><span> == </span><span style="color:#d08770;">1</span><span> &amp;&amp; isfloat(</span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">1</span><span>})
</span><span>    params.normalize = </span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">1</span><span>}; 
</span><span style="color:#65737e;">% second param is the struct
</span><span style="color:#b48ead;">elseif </span><span style="color:#bf616a;">nargin</span><span> == </span><span style="color:#d08770;">1</span><span> &amp;&amp; isstruct(</span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">1</span><span>})
</span><span>    params = </span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">1</span><span>};
</span><span style="color:#65737e;">% three parameters (img, [], p)
</span><span style="color:#b48ead;">elseif </span><span style="color:#bf616a;">nargin</span><span> == </span><span style="color:#d08770;">2</span><span> &amp;&amp; isfloat(</span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">1</span><span>}) &amp;&amp; isstruct(</span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">2</span><span>})
</span><span>    params = </span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">2</span><span>};
</span><span>    params.normalize = </span><span style="color:#bf616a;">varargin</span><span>{</span><span style="color:#d08770;">1</span><span>};
</span><span style="color:#65737e;">% no params
</span><span style="color:#b48ead;">elseif </span><span style="color:#bf616a;">nargin</span><span> == </span><span style="color:#d08770;">0
</span><span>    params = [];
</span><span style="color:#b48ead;">else
</span><span>    </span><span style="color:#b48ead;">warning</span><span>(&#39;</span><span style="color:#a3be8c;">NOMACS:paramFalse</span><span>&#39;, [&#39;</span><span style="color:#a3be8c;">The input parameters do not</span><span>&#39;...
</span><span>        &#39;</span><span style="color:#a3be8c;"> conform to the required schema. Using default parameters</span><span>&#39;...
</span><span>        &#39;</span><span style="color:#a3be8c;"> instead.</span><span>&#39;]);
</span><span style="color:#b48ead;">end
</span><span>
</span><span style="color:#b48ead;">if</span><span> ~isunix
</span><span>    
</span><span>    </span><span style="color:#b48ead;">try
</span><span>        exename = </span><span style="color:#b48ead;">winqueryreg</span><span>(&#39;</span><span style="color:#a3be8c;">HKEY_LOCAL_MACHINE</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">omacs.exe</span><span>&#39;);
</span><span>    </span><span style="color:#b48ead;">catch
</span><span>        exename = </span><span style="color:#b48ead;">fullfile</span><span>(&#39;</span><span style="color:#a3be8c;">C:</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">Program Files (x86)</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">nomacs</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">nomacs.exe</span><span>&#39;);
</span><span>    </span><span style="color:#b48ead;">end
</span><span>    imgname = </span><span style="color:#b48ead;">fullfile</span><span>(</span><span style="color:#b48ead;">tempdir</span><span>, &#39;</span><span style="color:#a3be8c;">matlab-nomacs.tif</span><span>&#39;);
</span><span style="color:#b48ead;">else
</span><span>    exename = &#39;&#39;;   </span><span style="color:#65737e;">% TODO
</span><span>    imgname = &#39;&#39;;   </span><span style="color:#65737e;">% TODO
</span><span style="color:#b48ead;">end
</span><span>
</span><span style="color:#65737e;">% define vars
</span><span>default_params.exePath          = [&#39;</span><span style="color:#a3be8c;">&quot;</span><span>&#39; exename &#39;</span><span style="color:#a3be8c;">&quot;</span><span>&#39;];
</span><span>default_params.tempFolder       = imgname;
</span><span>
</span><span>params = merge_structs(params, default_params);
</span><span>
</span><span>
</span><span style="color:#65737e;">%-------------------------------------------------------------------------
</span><span style="color:#65737e;">%   Subfunction: Merge Structs
</span><span style="color:#65737e;">%-------------------------------------------------------------------------
</span><span style="color:#b48ead;">function </span><span style="color:#bf616a;">struct2 </span><span>= </span><span style="color:#8fa1b3;">merge_structs</span><span>(</span><span style="color:#bf616a;">struct1</span><span>, </span><span style="color:#bf616a;">struct2</span><span>)
</span><span style="color:#65737e;">% function new_struct = merge_structs(struct1, struct2)
</span><span style="color:#65737e;">%
</span><span style="color:#65737e;">%   Merges both STRUCTs.
</span><span style="color:#65737e;">%   All values where both structs have the same fieldnames are taken from
</span><span style="color:#65737e;">%   STRUCT1. The NEW_STRUCT contains the fields of both STRUCTS.
</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>isempty(struct1)
</span><span>    </span><span style="color:#b48ead;">return</span><span>;
</span><span style="color:#b48ead;">end
</span><span>
</span><span>names = </span><span style="color:#b48ead;">fieldnames</span><span>(struct1);
</span><span>
</span><span style="color:#b48ead;">for </span><span style="color:#d08770;">i</span><span> = </span><span style="color:#d08770;">1</span><span>:</span><span style="color:#b48ead;">length</span><span>(names)
</span><span>    struct2.(names{</span><span style="color:#d08770;">i</span><span>}) = struct1.(names{</span><span style="color:#d08770;">i</span><span>});
</span><span style="color:#b48ead;">end
</span></code></pre>
<p>— the nomacs team</p>

        </article>
      </div>
    </div>
  </div>
</div>


  
    
<footer class="footer text-muted">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 order-last order-lg-first">
				<ul class="list-inline">
					
						<li class="list-inline-item">Powered by <a href="https://www.getzola.org/">Zola</a> and <a href="https://github.com/aaranxu/adidoks">AdiDoks</a></li>
					
				</ul>
			</div>
			<div class="col-lg-8 order-first order-lg-last text-lg-end">
				<ul class="list-inline">
					
						
							<li class="list-inline-item"><a href="https://nomacs.org/docs/contributing/code-of-conduct/">Code of Conduct</a></li>
						
					
				</ul>
			</div>
		</div>
	</div>
</footer>

  

  
<script type="text/javascript" src="https://nomacs.org/js/main.js" defer></script>

  <script type="text/javascript" src="https://nomacs.org/plugins/elasticlunr.min.js" defer></script>
  <script type="text/javascript" src="https://nomacs.org/search_index.en.js" defer></script>
  <script type="text/javascript" src="https://nomacs.org/js/search.js" defer></script>

  
</body>
</html>
